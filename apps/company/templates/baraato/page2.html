{% extends 'baraato/base.html' %}
{% load static %}


{% block part_2_time %}
	active
{% endblock %}

{# main #}
{% block main %}
    	<div class="part-2-main">
            <div class="text-main">
                <div class="text">زمان‌های در دسترس برای {{ company.name}}</div>
                <div class="text">لطفاً برای رزرو یک مورد را انتخاب کنید</div>
                <div class="text">برای تغییر ماه روی فلش کلیک کنید</div>

                <label>
                    {#TODO : Add data-jdp-max-date#}
                    <input id="test" data-jdp-miladi-input="miladi_date" data-jdp placeholder="انتخاب تاریخ" data-jdp-min-date="today">
                    <input id="miladi_date" />
                </label>
                
                <div class="div">
                    <div class="divar"></div>
                    <div class="parent-btn-page2">
                        <button class="button-green"><a href="{% url 'company:list-company' %}">بازگشت</a></button>
                    </div>
                </div>
            </div>
        </div>
{% endblock %}


{# js #}
{% block script %}
    {#  add files  Date conversion #}
    <script src="{% static 'date-conversion/farvardin.min.js' %}"></script>
<script>
    {# push data in list #}
    let lis = []
            {% for holiday in holidays %}
                lis.push(farvardin.gregorianToSolar({{holiday.date.year}} , {{holiday.date.month}} , {{holiday.date.day}} , "object"))
            {% endfor %}
   
    jalaliDatepicker.updateOptions({
        dayRendering:function(dayOptions,input){
            for (let i = 0; i < lis.length; i++) {
                    if (dayOptions.year === lis[i].year && dayOptions.month === lis[i].month && dayOptions.day === lis[i].day)
                        return{
                            isValid:false
                        }
            }   
      }
    });
    
    {# date conversion #}
    
    document.querySelector("[data-jdp-miladi-input]").addEventListener("jdp:change", function (e) {
        let miladiInput = document.getElementById(this.getAttribute("data-jdp-miladi-input"));
        if (!this.value) {
            miladiInput.value = "";
            return;
        }
        console.log(miladiInput.value)
        let date = this.value.split("/");
        console.log(date)
        console.log(date[0])
        miladiInput.value = farvardin.solarToGregorian(Number(date[0]), Number(date[1]), Number(date[2]), "array")
     });
</script>
{% endblock %}